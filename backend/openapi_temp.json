{
  "openapi": "3.1.0",
  "info": {
    "title": "ZiggyAI Trading Platform",
    "description": "Complete AI-powered trading platform with market analysis, news, signals, and execution",
    "version": "1.0.0"
  },
  "paths": {
    "/api/core/health": {
      "get": {
        "tags": ["core", "core"],
        "summary": "Core Health",
        "description": "Checks FastAPI + optional dependencies (Qdrant, Postgres, Redis, Scheduler).\nReturns {\"status\":\"ok\",\"details\":{...}}.",
        "operationId": "core_health_api_core_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/query": {
      "post": {
        "tags": ["core", "core"],
        "summary": "Api Query",
        "description": "RAG query over the local vector store.\nLazily imports RAG pieces so the API still boots when RAG is not configured.",
        "operationId": "api_query_api_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/QueryRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/QueryResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/ingest/web": {
      "post": {
        "tags": ["core", "core"],
        "summary": "Api Ingest Web",
        "operationId": "api_ingest_web_api_ingest_web_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/WebIngestRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WebIngestResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/ingest/pdf": {
      "post": {
        "tags": ["core", "core"],
        "summary": "Api Ingest Pdf",
        "operationId": "api_ingest_pdf_api_ingest_pdf_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_api_ingest_pdf_api_ingest_pdf_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/reset": {
      "post": {
        "tags": ["core", "core"],
        "summary": "Api Reset",
        "operationId": "api_reset_api_reset_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/agent": {
      "post": {
        "tags": ["core", "core"],
        "summary": "Api Agent",
        "description": "Tool-using LLM loop: lets Ziggy plan and call tools (web search/fetch, KB retrieve).\nSet approvals=True to return the first tool action for human approval instead of executing.",
        "operationId": "api_agent_api_agent_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/AgentRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/tasks/watch": {
      "post": {
        "tags": ["core", "core"],
        "summary": "Api Tasks Watch",
        "description": "Schedule a repeating agent run for a topic.\ncron examples:\n  - '0 9 * * *'     -> every day at 09:00\n  - '0 */2 * * *'   -> every 2 hours\n  - '30 8 * * 1-5'  -> 08:30 on weekdays",
        "operationId": "api_tasks_watch_api_tasks_watch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/WatchReq" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/tasks": {
      "get": {
        "tags": ["core", "core"],
        "summary": "Api Tasks List",
        "description": "List scheduled jobs.",
        "operationId": "api_tasks_list_api_tasks_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      },
      "delete": {
        "tags": ["core", "core"],
        "summary": "Api Tasks Cancel",
        "description": "Cancel a job by id.",
        "operationId": "api_tasks_cancel_api_tasks_delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CancelReq" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/browse/search": {
      "get": {
        "tags": ["core", "core"],
        "summary": "Browse Search",
        "description": "Lightweight search endpoint used by the UI's /browse command.\nProviders:\n  - Tavily (if chosen; requires an API key)\n  - DuckDuckGo (default, no API key)\n\nAlways returns 200 with an {error: \"...\"} on failure.",
        "operationId": "browse_search_api_browse_search_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "minLength": 2, "title": "Q" }
          },
          {
            "name": "max_results",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Max Results"
            }
          },
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "force 'tavily' or 'duckduckgo' for this request",
              "title": "Provider"
            },
            "description": "force 'tavily' or 'duckduckgo' for this request"
          },
          {
            "name": "tavily_key",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "optional: override TAVILY_API_KEY for this request",
              "title": "Tavily Key"
            },
            "description": "optional: override TAVILY_API_KEY for this request"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/browse": {
      "get": {
        "tags": ["core", "core"],
        "summary": "Browse Alias",
        "operationId": "browse_alias_api_browse_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "minLength": 2, "title": "Q" }
          },
          {
            "name": "max_results",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Max Results"
            }
          },
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Provider"
            }
          },
          {
            "name": "tavily_key",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Tavily Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/health": {
      "get": {
        "summary": "Trade Health",
        "description": "Minimal health: do not hit upstream markets. Report scan toggle,\nprovider chain (names only), and Telegram readiness flags.",
        "operationId": "trade_health_api_trade_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/screener": {
      "get": {
        "summary": "Get Screener",
        "operationId": "get_screener_api_trade_screener_get",
        "parameters": [
          {
            "name": "market",
            "in": "query",
            "required": false,
            "schema": { "type": "string", "default": "nyse", "title": "Market" }
          },
          {
            "name": "notify",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "If true, also emit Telegram alerts from this call",
              "default": false,
              "title": "Notify"
            },
            "description": "If true, also emit Telegram alerts from this call"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__api__routes_trading__ScreenerResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/explain": {
      "post": {
        "summary": "Explain Signal",
        "description": "Generate an explanation/rationale for a given signal payload.\nNow enhanced with Market Brain intelligence when available.\n- Accepts indicators from the frontend and optionally enriches them.\n- Uses Market Brain for advanced signal analysis and reasoning.\n- Falls back to legacy heuristic logic if Market Brain unavailable.",
        "operationId": "explain_signal_api_trade_explain_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ExplainIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ExplainOut" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/notify": {
      "post": {
        "summary": "Trade Notify",
        "operationId": "trade_notify_api_trade_notify_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/NotifyIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/notify/diag": {
      "get": {
        "summary": "Trade Notify Diag",
        "operationId": "trade_notify_diag_api_trade_notify_diag_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/notify/probe": {
      "get": {
        "summary": "Trade Notify Probe",
        "operationId": "trade_notify_probe_api_trade_notify_probe_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/notify/test": {
      "post": {
        "summary": "Trade Notify Test",
        "operationId": "trade_notify_test_api_trade_notify_test_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/scan/status": {
      "get": {
        "summary": "Scan Status",
        "operationId": "scan_status_api_trade_scan_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/scan/enable": {
      "post": {
        "summary": "Scan Enable",
        "operationId": "scan_enable_api_trade_scan_enable_post",
        "parameters": [
          {
            "name": "enabled",
            "in": "query",
            "required": true,
            "schema": {
              "type": "boolean",
              "description": "true/false",
              "title": "Enabled"
            },
            "description": "true/false"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/market/calendar": {
      "get": {
        "summary": "Market Calendar",
        "operationId": "market_calendar_api_market_calendar_get",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 60,
              "minimum": 1,
              "default": 14,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/ohlc": {
      "get": {
        "summary": "Get Ohlc",
        "operationId": "get_ohlc_api_trade_ohlc_get",
        "parameters": [
          {
            "name": "tickers",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Comma-separated tickers",
              "title": "Tickers"
            },
            "description": "Comma-separated tickers"
          },
          {
            "name": "period_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3650,
              "minimum": 1,
              "default": 60,
              "title": "Period Days"
            }
          },
          {
            "name": "debug_source",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "If true, include provider source and provider_chain.",
              "default": false,
              "title": "Debug Source"
            },
            "description": "If true, include provider source and provider_chain."
          },
          {
            "name": "batch",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "If true, returns a summary + per-ticker results with ok/error and records. Backward-compatible mapping when false.",
              "default": false,
              "title": "Batch"
            },
            "description": "If true, returns a summary + per-ticker results with ok/error and records. Backward-compatible mapping when false."
          },
          {
            "name": "timeout_s",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "description": "Per-ticker timeout in seconds for batch mode (defaults to internal).",
              "title": "Timeout S"
            },
            "description": "Per-ticker timeout in seconds for batch mode (defaults to internal)."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/market/breadth": {
      "get": {
        "summary": "Market Breadth",
        "description": "Market breadth over a watchlist:\n  - Advance/Decline/Unch\n  - % above 50/200DMA\n  - New highs/lows (≈52w using 252 trading days)\n  - TRIN (Arms Index) using end-of-day volume\n\nNOTE: To support multiple front-ends without breaking changes, we KEEP the\nexisting response shape and *augment* it with a few mirrored top-level\nconvenience fields (adv/dec/unch, n/count, above50/above200, pct50/pct200,\nratio50/ratio200). No existing keys are removed or renamed.",
        "operationId": "market_breadth_api_market_breadth_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Comma-separated tickers; default internal watchlist",
              "title": "Symbols"
            },
            "description": "Comma-separated tickers; default internal watchlist"
          },
          {
            "name": "period_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 2000,
              "minimum": 30,
              "default": 260,
              "title": "Period Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Market Breadth Api Market Breadth Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/market/risk-lite": {
      "get": {
        "summary": "Risk Lite Alias",
        "operationId": "risk_lite_alias_api_market_risk_lite_get",
        "parameters": [
          {
            "name": "period_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 720,
              "minimum": 30,
              "default": 180,
              "title": "Period Days"
            }
          },
          {
            "name": "window",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 60,
              "minimum": 5,
              "default": 20,
              "title": "Window"
            }
          },
          {
            "name": "use_cache",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Use Cache"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/market-risk-lite": {
      "get": {
        "summary": "Risk Lite",
        "description": "Lightweight risk bar derived from CBOE Put/Call:\n  - Tries ^CPC (index) then falls back to ^CPCE (equity).\n  - Returns {ticker, last, ma20, z20, date}.\n  - On failure, returns {'cpc': None, 'error': '...'}.",
        "operationId": "risk_lite_api_market_risk_lite_get",
        "parameters": [
          {
            "name": "period_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 720,
              "minimum": 30,
              "description": "Lookback window for downloads",
              "default": 180,
              "title": "Period Days"
            },
            "description": "Lookback window for downloads"
          },
          {
            "name": "window",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 60,
              "minimum": 5,
              "description": "Moving average / z-score window",
              "default": 20,
              "title": "Window"
            },
            "description": "Moving average / z-score window"
          },
          {
            "name": "use_cache",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Return cached value when fresh",
              "default": true,
              "title": "Use Cache"
            },
            "description": "Return cached value when fresh"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/market/risk": {
      "get": {
        "summary": "Risk Lite Alias2",
        "operationId": "risk_lite_alias2_api_market_risk_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trading/backtest": {
      "post": {
        "summary": "Trading Backtest",
        "description": "Lightweight backtest intended for quick UI feedback.\nNow enhanced with Market Brain when available.\nFalls back to legacy SMA cross strategy if brain unavailable.",
        "operationId": "trading_backtest_api_trading_backtest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/BacktestIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/backtest": {
      "post": {
        "summary": "Backtest Alias",
        "operationId": "backtest_alias_api_backtest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/BacktestIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/strategy/backtest": {
      "post": {
        "summary": "Backtest Alias2",
        "operationId": "backtest_alias2_api_strategy_backtest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/BacktestIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/market": {
      "post": {
        "summary": "Trade Market",
        "description": "Paper trade stub: echoes computed ATR sizing and projected stops/targets.\nDoes NOT route to a broker. Safe for UI one-click experiments.",
        "operationId": "trade_market_api_trade_market_post",
        "parameters": [
          {
            "name": "x-idempotency-key",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Idempotency-Key"
            }
          },
          {
            "name": "x-ziggy-throttle",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "number" }, { "type": "null" }],
              "title": "X-Ziggy-Throttle"
            }
          },
          {
            "name": "x-ziggy-risk-used",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "number" }, { "type": "null" }],
              "title": "X-Ziggy-Risk-Used"
            }
          },
          {
            "name": "x-ziggy-guardrails",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "X-Ziggy-Guardrails"
            }
          },
          {
            "name": "x-ziggy-daily-max-pct",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "number" }, { "type": "null" }],
              "title": "X-Ziggy-Daily-Max-Pct"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TradeIn" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/TradeOut" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/orders": {
      "get": {
        "summary": "Get Orders",
        "description": "Get all orders, optionally filtered by status.",
        "operationId": "get_orders_api_trade_orders_get",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by order status",
              "title": "Status"
            },
            "description": "Filter by order status"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/positions": {
      "get": {
        "summary": "Get Positions",
        "description": "Get all current positions.",
        "operationId": "get_positions_api_trade_positions_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/portfolio": {
      "get": {
        "summary": "Get Portfolio",
        "description": "Get portfolio summary with total values and P&L.",
        "operationId": "get_portfolio_api_trade_portfolio_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/trade/orders/{order_id}": {
      "delete": {
        "summary": "Cancel Order",
        "description": "Cancel a specific order.",
        "operationId": "cancel_order_api_trade_orders__order_id__delete",
        "parameters": [
          {
            "name": "order_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Order Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/execute": {
      "post": {
        "summary": "Execute Trade",
        "description": "Execute a trade with enhanced signal data.",
        "operationId": "execute_trade_api_trade_execute_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TradeIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/trade/mode/{mode}": {
      "post": {
        "summary": "Set Trading Mode",
        "description": "Set trading mode: 'paper' or 'live'.",
        "operationId": "set_trading_mode_api_trade_mode__mode__post",
        "parameters": [
          {
            "name": "mode",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Mode" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/trade/trade/market": {
      "post": {
        "tags": ["trading", "trading"],
        "summary": "Trade Market",
        "description": "Submit market order with policy and guardrail checks.\n\nFlow: policy.check → guardrails.check → route → journal intent+policy → emit order id",
        "operationId": "trade_market_trade_trade_market_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TradeRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__trading__router__TradeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/trade/trade/bracket": {
      "post": {
        "tags": ["trading", "trading"],
        "summary": "Trade Bracket",
        "description": "Submit bracket order with policy and guardrail checks.",
        "operationId": "trade_bracket_trade_trade_bracket_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/BracketRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__trading__router__TradeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/trade/trade/health": {
      "get": {
        "tags": ["trading", "trading"],
        "summary": "Trade Health",
        "description": "Get current trading health and risk metrics.",
        "operationId": "trade_health_trade_trade_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HealthResponse" }
              }
            }
          }
        }
      }
    },
    "/trade/trade/panic": {
      "post": {
        "tags": ["trading", "trading"],
        "summary": "Trade Panic",
        "description": "Emergency panic - close all positions and cancel all orders.\n\nCloses all open positions & cancels orders within PANIC_TIMEOUT_S.",
        "operationId": "trade_panic_trade_trade_panic_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PanicResponse" }
              }
            }
          }
        }
      }
    },
    "/trade/trade/quality": {
      "get": {
        "tags": ["trading", "trading"],
        "summary": "Trade Quality",
        "description": "Get execution quality statistics by venue and symbol.",
        "operationId": "trade_quality_trade_trade_quality_get",
        "parameters": [
          {
            "name": "venue",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Venue"
            }
          },
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Symbol"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/QualityResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/trade/trade/resume": {
      "post": {
        "tags": ["trading", "trading"],
        "summary": "Resume Trading",
        "description": "Resume trading after emergency stop.",
        "operationId": "resume_trading_trade_trade_resume_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/market/overview": {
      "get": {
        "summary": "Market Overview",
        "description": "Compact overview using the provider factory (priority + failover + small cache).\n\nPer symbol:\n  - last\n  - chg1d   (vs today's open if since_open=true, else vs previous close)\n  - chg5d   (vs close 5 bars ago)\n  - chg20d  (vs close 20 bars ago)\n  - ref     (baseline used for chg1d)",
        "operationId": "market_overview_api_market_overview_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Comma-separated symbols.",
              "default": "AAPL,MSFT",
              "title": "Symbols"
            },
            "description": "Comma-separated symbols."
          },
          {
            "name": "period_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3650,
              "minimum": 2,
              "default": 30,
              "title": "Period Days"
            }
          },
          {
            "name": "since_open",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "If true, 1D change is vs today's regular-session open; else vs previous close.",
              "default": false,
              "title": "Since Open"
            },
            "description": "If true, 1D change is vs today's regular-session open; else vs previous close."
          },
          {
            "name": "debug_source",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "If true, include provider source per symbol and provider_chain.",
              "default": false,
              "title": "Debug Source"
            },
            "description": "If true, include provider source per symbol and provider_chain."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Market Overview Api Market Overview Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/market/macro/history": {
      "get": {
        "summary": "Market Macro History",
        "description": "Optional macro history for UI modal. Best-effort, zero external keys changed.\nSource order priority:\n  1) Local file: data/macro_history/{CODE}.json (or app/data/...)\n  2) ( extensibility point ) Other providers can be added behind the factory.\nEnriches rows with computed surprise% (if missing) and SPX reactions when possible.",
        "operationId": "market_macro_history_api_market_macro_history_get",
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Macro code (e.g., CPI, NFP, PCE, ISM).",
              "title": "Code"
            },
            "description": "Macro code (e.g., CPI, NFP, PCE, ISM)."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Market Macro History Api Market Macro History Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/market/market/calendar": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Full Calendar",
        "description": "Get comprehensive market calendar data including holidays, earnings, and economic events.",
        "operationId": "get_full_calendar_market_market_calendar_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/market/market/holidays": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Holidays",
        "description": "Get market holidays for specified year.",
        "operationId": "get_holidays_market_market_holidays_get",
        "parameters": [
          {
            "name": "year",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "integer" }, { "type": "null" }],
              "title": "Year"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/market/market/earnings": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Earnings Calendar",
        "description": "Get earnings calendar for date range.",
        "operationId": "get_earnings_calendar_market_market_earnings_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "End Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/market/market/economic": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Economic Events",
        "description": "Get economic events calendar.",
        "operationId": "get_economic_events_market_market_economic_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "End Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/market/market/schedule": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Market Schedule",
        "description": "Get market schedule for specific date.",
        "operationId": "get_market_schedule_market_market_schedule_get",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/market/market/indicators": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Economic Indicators",
        "description": "Get key economic indicators from FRED.",
        "operationId": "get_economic_indicators_market_market_indicators_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/market/market/fred/{series_id}": {
      "get": {
        "tags": ["market_calendar", "market_calendar"],
        "summary": "Get Fred Series",
        "description": "Get specific FRED economic data series.",
        "operationId": "get_fred_series_market_market_fred__series_id__get",
        "parameters": [
          {
            "name": "series_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Series Id" }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/crypto/quotes": {
      "get": {
        "summary": "Crypto Quotes",
        "operationId": "crypto_quotes_api_crypto_quotes_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Comma-separated symbols like BTC-USD,ETH-USD,SOL-USD",
              "title": "Symbols"
            },
            "description": "Comma-separated symbols like BTC-USD,ETH-USD,SOL-USD"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/crypto/ohlc": {
      "get": {
        "summary": "Crypto Ohlc",
        "operationId": "crypto_ohlc_api_crypto_ohlc_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Comma-separated symbols",
              "title": "Symbols"
            },
            "description": "Comma-separated symbols"
          },
          {
            "name": "interval",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(1m|5m)$",
              "default": "1m",
              "title": "Interval"
            }
          },
          {
            "name": "minutes",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10080,
              "minimum": 1,
              "default": 240,
              "title": "Minutes"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/screener/screener/scan": {
      "post": {
        "tags": ["screening", "screening"],
        "summary": "Screen Market",
        "description": "Screen market using cognitive core for high-quality signals.\n\nProcesses multiple symbols and returns those meeting criteria,\nsorted by signal quality and confidence.",
        "operationId": "screen_market_screener_screener_scan_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ScreenerRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/app__api__routes_screener__ScreenerResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/screener/screener/universe/sp500": {
      "get": {
        "tags": ["screening", "screening"],
        "summary": "Get Sp500 Universe",
        "description": "Get S&P 500 universe for screening.",
        "operationId": "get_sp500_universe_screener_screener_universe_sp500_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/screener/screener/universe/nasdaq100": {
      "get": {
        "tags": ["screening", "screening"],
        "summary": "Get Nasdaq100 Universe",
        "description": "Get NASDAQ 100 universe for screening.",
        "operationId": "get_nasdaq100_universe_screener_screener_universe_nasdaq100_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/screener/screener/presets/momentum": {
      "get": {
        "tags": ["screening", "screening"],
        "summary": "Momentum Screen",
        "description": "Pre-configured momentum screening.",
        "operationId": "momentum_screen_screener_screener_presets_momentum_get",
        "parameters": [
          {
            "name": "universe",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Universe to screen",
              "default": "sp500",
              "title": "Universe"
            },
            "description": "Universe to screen"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "description": "Minimum confidence",
              "default": 0.7,
              "title": "Min Confidence"
            },
            "description": "Minimum confidence"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/screener/screener/presets/mean_reversion": {
      "get": {
        "tags": ["screening", "screening"],
        "summary": "Mean Reversion Screen",
        "description": "Pre-configured mean reversion screening.",
        "operationId": "mean_reversion_screen_screener_screener_presets_mean_reversion_get",
        "parameters": [
          {
            "name": "universe",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Universe to screen",
              "default": "sp500",
              "title": "Universe"
            },
            "description": "Universe to screen"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "description": "Minimum confidence",
              "default": 0.7,
              "title": "Min Confidence"
            },
            "description": "Minimum confidence"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/screener/screener/regime_summary": {
      "get": {
        "tags": ["screening", "screening"],
        "summary": "Get Regime Summary",
        "description": "Get regime breakdown for a universe.",
        "operationId": "get_regime_summary_screener_screener_regime_summary_get",
        "parameters": [
          {
            "name": "universe",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Universe to analyze",
              "default": "sp500",
              "title": "Universe"
            },
            "description": "Universe to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/screener/screener/health": {
      "get": {
        "tags": ["screening", "screening"],
        "summary": "Screener Health Check",
        "description": "Health check for screener functionality.",
        "operationId": "screener_health_check_screener_screener_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/runs": {
      "post": {
        "summary": "Create Paper Run",
        "description": "Create a new paper trading run with specified configuration.\nDev environments only.",
        "operationId": "create_paper_run_api_runs_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/PaperRunRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PaperRunResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List Paper Runs",
        "description": "List paper trading runs with optional filtering",
        "operationId": "list_paper_runs_api_runs_get",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/PaperRunResponse" },
                  "title": "Response List Paper Runs Api Runs Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}": {
      "get": {
        "summary": "Get Paper Run",
        "description": "Get detailed information about a specific paper run",
        "operationId": "get_paper_run_api_runs__run_id__get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PaperRunResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/stop": {
      "post": {
        "summary": "Stop Paper Run",
        "description": "Stop a running paper trading session",
        "operationId": "stop_paper_run_api_runs__run_id__stop_post",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/trades": {
      "get": {
        "summary": "Get Trades",
        "description": "Get trade history for a paper run with filtering options",
        "operationId": "get_trades_api_runs__run_id__trades_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by trade status",
              "title": "Status"
            },
            "description": "Filter by trade status"
          },
          {
            "name": "theory_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by theory",
              "title": "Theory Name"
            },
            "description": "Filter by theory"
          },
          {
            "name": "ticker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by ticker",
              "title": "Ticker"
            },
            "description": "Filter by ticker"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/app__api__routes_paper__TradeResponse"
                  },
                  "title": "Response Get Trades Api Runs  Run Id  Trades Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/theories": {
      "get": {
        "summary": "Get Theory Performance",
        "description": "Get theory performance metrics for a paper run",
        "operationId": "get_theory_performance_api_runs__run_id__theories_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by theory status",
              "title": "Status"
            },
            "description": "Filter by theory status"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TheoryPerfResponse"
                  },
                  "title": "Response Get Theory Performance Api Runs  Run Id  Theories Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/theories/{theory_name}/pause": {
      "post": {
        "summary": "Pause Theory",
        "description": "Pause a specific theory (stop receiving new allocations)",
        "operationId": "pause_theory_api_runs__run_id__theories__theory_name__pause_post",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          },
          {
            "name": "theory_name",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Theory Name" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/stats": {
      "get": {
        "summary": "Get Run Stats",
        "description": "Get detailed statistics and health metrics for a paper run",
        "operationId": "get_run_stats_api_runs__run_id__stats_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/models": {
      "get": {
        "summary": "Get Model Snapshots",
        "description": "Get model snapshots and learning progress for a paper run",
        "operationId": "get_model_snapshots_api_runs__run_id__models_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "title": "Run Id" }
          },
          {
            "name": "model_name",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by model name",
              "title": "Model Name"
            },
            "description": "Filter by model name"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/emergency/stop_all": {
      "post": {
        "summary": "Emergency Stop All",
        "description": "Emergency stop all active paper trading runs",
        "operationId": "emergency_stop_all_api_emergency_stop_all_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "summary": "Paper Lab Health",
        "description": "Comprehensive paper trading system health check with backoff/caching.\n\nAcceptance checks (lightweight):\n- When Postgres is down, first call returns 503 and subsequent calls before next_retry_at\n  return cached DOWN without hammering DB.\n- On success, result is cached for ~10s.",
        "operationId": "paper_lab_health_api_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/cognitive/cognitive/status": {
      "get": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Get Cognitive Status",
        "description": "Get status of all cognitive systems.\n\nReturns comprehensive status including:\n- Meta-learning strategies and performance\n- Counterfactual analysis insights\n- Episodic memory statistics",
        "operationId": "get_cognitive_status_cognitive_cognitive_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Cognitive Status Cognitive Cognitive Status Get"
                }
              }
            }
          }
        }
      }
    },
    "/cognitive/cognitive/enhance-decision": {
      "post": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Enhance Decision",
        "description": "Enhance a trading decision with cognitive intelligence.\n\nApplies:\n- Meta-learning to select optimal strategy\n- Episodic memory to recall similar situations\n- Confidence adjustment based on historical success\n\nArgs:\n    request: Decision to enhance with market context\n\nReturns:\n    Enhanced decision with cognitive insights",
        "operationId": "enhance_decision_cognitive_cognitive_enhance_decision_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__routes_cognitive__DecisionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/DecisionResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/cognitive/cognitive/record-outcome": {
      "post": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Record Outcome",
        "description": "Record the outcome of a trading decision.\n\nUpdates all cognitive systems with the result:\n- Meta-learner tracks strategy performance\n- Counterfactual engine analyzes alternatives\n- Episodic memory stores the episode\n\nArgs:\n    record: Complete decision and outcome information\n\nReturns:\n    Confirmation message",
        "operationId": "record_outcome_cognitive_cognitive_record_outcome_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/OutcomeRecord" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": { "type": "string" },
                  "type": "object",
                  "title": "Response Record Outcome Cognitive Cognitive Record Outcome Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/cognitive/cognitive/meta-learning/strategies": {
      "get": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Get Meta Learning Strategies",
        "description": "Get all meta-learning strategies and their performance.\n\nReturns:\n    Dictionary of strategies with performance metrics",
        "operationId": "get_meta_learning_strategies_cognitive_cognitive_meta_learning_strategies_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Meta Learning Strategies Cognitive Cognitive Meta Learning Strategies Get"
                }
              }
            }
          }
        }
      }
    },
    "/cognitive/cognitive/counterfactual/insights": {
      "get": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Get Counterfactual Insights",
        "description": "Get aggregate insights from counterfactual analysis.\n\nReturns:\n    Insights about opportunities missed, regret, and alternative actions",
        "operationId": "get_counterfactual_insights_cognitive_cognitive_counterfactual_insights_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Counterfactual Insights Cognitive Cognitive Counterfactual Insights Get"
                }
              }
            }
          }
        }
      }
    },
    "/cognitive/cognitive/episodic-memory/stats": {
      "get": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Get Episodic Memory Stats",
        "description": "Get statistics about episodic memory.\n\nReturns:\n    Memory statistics including episode counts and success rates",
        "operationId": "get_episodic_memory_stats_cognitive_cognitive_episodic_memory_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Episodic Memory Stats Cognitive Cognitive Episodic Memory Stats Get"
                }
              }
            }
          }
        }
      }
    },
    "/cognitive/cognitive/health": {
      "get": {
        "tags": ["cognitive", "cognitive"],
        "summary": "Health Check",
        "description": "Health check for cognitive systems.",
        "operationId": "health_check_cognitive_cognitive_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": { "type": "string" },
                  "type": "object",
                  "title": "Response Health Check Cognitive Cognitive Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/chat/chat/complete": {
      "post": {
        "tags": ["chat", "chat"],
        "summary": "Chat Complete",
        "description": "OpenAI-compatible chat completion proxy (non-streaming by default, SSE if stream=true).\n\n- If USE_OPENAI=true, forwards to OpenAI.\n- Otherwise forwards to LOCAL_LLM_BASE_URL (Ollama/LM Studio).",
        "operationId": "chat_complete_chat_chat_complete_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ChatRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/chat/chat/health": {
      "get": {
        "tags": ["chat", "chat"],
        "summary": "Chat Health",
        "description": "Quick connectivity probe against the configured provider using a tiny no-op call.\nDoes NOT consume tokens on local servers; on OpenAI this is a minimal request.",
        "operationId": "chat_health_chat_chat_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/chat/chat/config": {
      "get": {
        "tags": ["chat", "chat"],
        "summary": "Chat Config",
        "description": "Non-sensitive config snapshot for debugging.",
        "operationId": "chat_config_chat_chat_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/signal/signal/explain": {
      "get": {
        "tags": ["explain", "explain"],
        "summary": "Get Signal Explanation",
        "description": "Get detailed signal explanation with SHAP features, calibration, and neighbors.\n\nBrain-first: Always reads from or writes to memory layer.\nReturns waterfall breakdown, mind-flip analysis, and staleness info.",
        "operationId": "get_signal_explanation_signal_signal_explain_get",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Stock symbol",
              "title": "Ticker"
            },
            "description": "Stock symbol"
          },
          {
            "name": "dt",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "ISO timestamp",
              "title": "Dt"
            },
            "description": "ISO timestamp"
          },
          {
            "name": "interval",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Time interval",
              "default": "1D",
              "title": "Interval"
            },
            "description": "Time interval"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ExplainResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/signal/signal/explain/feedback": {
      "post": {
        "tags": ["explain", "explain"],
        "summary": "Submit Explanation Feedback",
        "description": "Submit thumbs up/down feedback on explanations.\nIntegrates with existing feedback system.",
        "operationId": "submit_explanation_feedback_signal_signal_explain_feedback_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExplainFeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/signal/signal/explain/health": {
      "get": {
        "tags": ["explain", "explain"],
        "summary": "Explain Health Check",
        "description": "Health check for explain service.",
        "operationId": "explain_health_check_signal_signal_explain_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/signal/signal/trace": {
      "get": {
        "tags": ["trace", "trace"],
        "summary": "Get Signal Trace",
        "description": "Get decision trace DAG and raw JSON for an event.\n\nBrain-first: Always reads from or writes to memory layer.\nReturns decision graph visualization and raw data for power users.",
        "operationId": "get_signal_trace_signal_signal_trace_get",
        "parameters": [
          {
            "name": "event_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Event ID to trace",
              "title": "Event Id"
            },
            "description": "Event ID to trace"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/TraceResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/signal/signal/trace/list": {
      "get": {
        "tags": ["trace", "trace"],
        "summary": "List Traces",
        "description": "List available traces with basic metadata.",
        "operationId": "list_traces_signal_signal_trace_list_get",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Filter by ticker",
              "title": "Ticker"
            },
            "description": "Filter by ticker"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum traces to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum traces to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/signal/signal/trace/health": {
      "get": {
        "tags": ["trace", "trace"],
        "summary": "Trace Health Check",
        "description": "Health check for trace service.",
        "operationId": "trace_health_check_signal_signal_trace_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/status": {
      "get": {
        "summary": "Get Learning Status",
        "description": "Get current learning system status.",
        "operationId": "get_learning_status_api_learning_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/data/summary": {
      "get": {
        "summary": "Get Learning Data Summary",
        "description": "Get summary of available learning data.",
        "operationId": "get_learning_data_summary_api_learning_data_summary_get",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "default": 90,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/learning/rules/current": {
      "get": {
        "summary": "Get Current Rules",
        "description": "Get the currently active rule set.",
        "operationId": "get_current_rules_api_learning_rules_current_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/rules/history": {
      "get": {
        "summary": "Get Rules History",
        "description": "Get history of all rule versions.",
        "operationId": "get_rules_history_api_learning_rules_history_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/run": {
      "post": {
        "summary": "Run Learning Iteration",
        "description": "Run a single learning iteration.",
        "operationId": "run_learning_iteration_api_learning_run_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/results/latest": {
      "get": {
        "summary": "Get Latest Learning Result",
        "description": "Get the most recent learning result.",
        "operationId": "get_latest_learning_result_api_learning_results_latest_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/results/history": {
      "get": {
        "summary": "Get Learning History",
        "description": "Get history of learning results.",
        "operationId": "get_learning_history_api_learning_results_history_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/learning/evaluate/current": {
      "get": {
        "summary": "Evaluate Current Performance",
        "description": "Evaluate current rule performance.",
        "operationId": "evaluate_current_performance_api_learning_evaluate_current_get",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 180,
              "minimum": 7,
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/learning/gates": {
      "get": {
        "summary": "Get Learning Gates",
        "description": "Get current validation gates configuration.",
        "operationId": "get_learning_gates_api_learning_gates_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      },
      "put": {
        "summary": "Update Learning Gates",
        "description": "Update validation gates configuration.",
        "operationId": "update_learning_gates_api_learning_gates_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/StrictGatesModel" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/learning/calibration/status": {
      "get": {
        "summary": "Get Calibration Status",
        "description": "Get probability calibration status.",
        "operationId": "get_calibration_status_api_learning_calibration_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/learning/calibration/build": {
      "post": {
        "summary": "Build Calibration Model",
        "description": "Build probability calibration model from recent data.",
        "operationId": "build_calibration_model_api_learning_calibration_build_post",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 30,
              "default": 90,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/learning/health": {
      "get": {
        "summary": "Get Learning Health",
        "description": "Get overall health status of the learning system.",
        "operationId": "get_learning_health_api_learning_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/news/sources": {
      "get": {
        "summary": "News Sources",
        "description": "Return the configured/default RSS sources.\nShape:\n  { \"asof\": <epoch>, \"sources\": [ { \"id\",\"label\",\"url\" }, ... ] }",
        "operationId": "news_sources_api_news_sources_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/news/headlines": {
      "get": {
        "summary": "News Headlines",
        "description": "Unified RSS headlines (no paid keys). De-duplicates and normalizes fields.\nResponse shape:\n  {\n    \"asof\": <epoch>,\n    \"count\": <int>,\n    \"items\": [\n      {\n        \"id\": \"<stable-id>\",\n        \"source\": \"Reuters Markets\",\n        \"site\": \"reuters.com\",\n        \"title\": \"...\",\n        \"url\": \"https://...\",\n        \"published\": \"2025-01-12T13:45:00Z\",\n        \"date\": \"2025-01-12T13:45:00Z\",   # alias for convenience\n        \"summary\": \"...\",\n        \"tickers\": [\"AAPL\", \"MSFT\"],\n        \"symbols\": [\"AAPL\", \"MSFT\"],      # alias for convenience\n        \"favicon\": \"https://.../favicon.ico\",\n        # NEW (non-breaking): when available we include per-headline sentiment\n        # \"score\": float in [-1,1], \"label\": \"positive\"|\"neutral\"|\"negative\"\n      }, ...\n    ]\n  }",
        "operationId": "news_headlines_api_news_headlines_get",
        "parameters": [
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Single ticker (compat)",
              "title": "Symbol"
            },
            "description": "Single ticker (compat)"
          },
          {
            "name": "symbols",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Comma-separated tickers to match in title/summary (e.g., AAPL,MSFT)",
              "title": "Symbols"
            },
            "description": "Comma-separated tickers to match in title/summary (e.g., AAPL,MSFT)"
          },
          {
            "name": "q",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Keyword filter (case-insensitive) across title/summary",
              "title": "Q"
            },
            "description": "Keyword filter (case-insensitive) across title/summary"
          },
          {
            "name": "sources",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Comma-separated source IDs or URLs; defaults to the service's built-ins",
              "title": "Sources"
            },
            "description": "Comma-separated source IDs or URLs; defaults to the service's built-ins"
          },
          {
            "name": "lookback_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 30,
              "minimum": 1,
              "description": "Limit items to roughly the last N days (as supported by feeds)",
              "default": 3,
              "title": "Lookback Days"
            },
            "description": "Limit items to roughly the last N days (as supported by feeds)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Max items after merge & sort (freshest first)",
              "default": 30,
              "title": "Limit"
            },
            "description": "Max items after merge & sort (freshest first)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/news/filings": {
      "get": {
        "summary": "News Filings",
        "description": "Recent SEC filings via the free SEC Atom feed.\n\nResponse shape:\n  {\n    \"asof\": <epoch>,\n    \"count\": n,\n    \"items\": [\n      {\n        \"ticker\": \"AAPL\",\n        \"cik\": \"0000320193\",\n        \"form\": \"8-K\",\n        \"filed\": \"2025-01-12T21:10:00Z\",\n        \"title\": \"Apple Inc - 8-K\",\n        \"link\": \"https://www.sec.gov/Archives/edgar/data/...\",\n        \"description\": \"...\",   # optional\n      }, ...\n    ]\n  }",
        "operationId": "news_filings_api_news_filings_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Comma-separated tickers (e.g., AAPL,MSFT). If omitted, a small default universe may be used.",
              "title": "Symbols"
            },
            "description": "Comma-separated tickers (e.g., AAPL,MSFT). If omitted, a small default universe may be used."
          },
          {
            "name": "forms",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Comma-separated SEC form codes to include (e.g., 10-K,10-Q,8-K,13F,S-1).",
              "default": "10-K,10-Q,8-K",
              "title": "Forms"
            },
            "description": "Comma-separated SEC form codes to include (e.g., 10-K,10-Q,8-K,13F,S-1)."
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 30,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/news/filings/recent": {
      "get": {
        "summary": "News Filings Recent",
        "description": "Compatibility wrapper for `/news/filings` so the UI can call:\n  /news/filings/recent?ticker=SYM&limit=5",
        "operationId": "news_filings_recent_api_news_filings_recent_get",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Single ticker (compat)",
              "title": "Ticker"
            },
            "description": "Single ticker (compat)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 5,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/news/sentiment": {
      "get": {
        "summary": "News Sentiment",
        "description": "Return an NLP sentiment summary for recent headlines mentioning `ticker`.\nOutput shape (compact, UI-friendly):\n  {\n    \"ticker\": \"AAPL\",\n    \"score\": -0.18,               # mean score in [-1,1]\n    \"label\": \"negative\",          # negative|neutral|positive\n    \"confidence\": 0.66,           # heuristic 0..1\n    \"sample_count\": 12,\n    \"updated_at\": \"2025-01-12T12:34:56Z\",\n    \"samples\": [ { title, url, published, source, score, label }, ... ]\n  }",
        "operationId": "news_sentiment_api_news_sentiment_get",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Primary ticker (alias: symbol)",
              "title": "Ticker"
            },
            "description": "Primary ticker (alias: symbol)"
          },
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Alias for ticker",
              "title": "Symbol"
            },
            "description": "Alias for ticker"
          },
          {
            "name": "lookback_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 30,
              "minimum": 1,
              "default": 3,
              "title": "Lookback Days"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 40,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/news/headwind": {
      "get": {
        "summary": "News Headwind",
        "description": "Compatibility alias that returns the same payload as /news/sentiment.",
        "operationId": "news_headwind_api_news_headwind_get",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Primary ticker (alias: symbol)",
              "title": "Ticker"
            },
            "description": "Primary ticker (alias: symbol)"
          },
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "description": "Alias for ticker",
              "title": "Symbol"
            },
            "description": "Alias for ticker"
          },
          {
            "name": "lookback_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 30,
              "minimum": 1,
              "default": 3,
              "title": "Lookback Days"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 40,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/news/ping": {
      "get": {
        "summary": "News Ping",
        "operationId": "news_ping_api_news_ping_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/status": {
      "get": {
        "summary": "Alerts Status",
        "description": "Return current scanning status. If full scheduler status is available,\ninclude it; otherwise return the minimal enabled flag.",
        "operationId": "alerts_status_api_alerts_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/start": {
      "post": {
        "summary": "Alerts Start",
        "description": "Start (or ensure) the background scan loop and enable it.",
        "operationId": "alerts_start_api_alerts_start_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/stop": {
      "post": {
        "summary": "Alerts Stop",
        "description": "Disable the background scan loop. If stop_scanner is available, call it;\notherwise we just flip the enable flag to pause alerts.",
        "operationId": "alerts_stop_api_alerts_stop_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/ping/test": {
      "post": {
        "summary": "Alerts Ping Test",
        "description": "Send a Telegram test message.\nSuccess if tg_send() returns True OR last_raw.json.ok == True.",
        "operationId": "alerts_ping_test_api_alerts_ping_test_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/create": {
      "post": {
        "summary": "Alerts Create",
        "description": "Generic alert creator - now uses production alert system.\nExample:\n  { \"symbol\": \"AAPL\", \"type\": \"sma\", \"window\": 50, \"rule\": \"cross\" }",
        "operationId": "alerts_create_api_alerts_create_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/AlertCreateIn" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/alerts/sma50": {
      "post": {
        "summary": "Alerts Sma50",
        "description": "Convenience endpoint: create a 50DMA cross alert.\nAccepts { symbol | ticker } and optional rule override.",
        "operationId": "alerts_sma50_api_alerts_sma50_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "additionalProperties": true,
                "type": "object",
                "title": "Body"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/alerts/moving-average/50": {
      "post": {
        "summary": "Alerts Ma50 Alias",
        "description": "Alias for /alerts/sma50.",
        "operationId": "alerts_ma50_alias_api_alerts_moving_average_50_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "additionalProperties": true,
                "type": "object",
                "title": "Body"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/alerts/list": {
      "get": {
        "summary": "Alerts List",
        "description": "Returns alerts from production system or in-memory fallback.",
        "operationId": "alerts_list_api_alerts_list_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/production/status": {
      "get": {
        "summary": "Alerts Production Status",
        "description": "Check if production alert system is available.",
        "operationId": "alerts_production_status_api_alerts_production_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/api/alerts/history": {
      "get": {
        "summary": "Alerts History",
        "description": "Get alert trigger history.",
        "operationId": "alerts_history_api_alerts_history_get",
        "parameters": [
          {
            "name": "alert_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Alert Id"
            }
          },
          {
            "name": "symbol",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [{ "type": "string" }, { "type": "null" }],
              "title": "Symbol"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": { "type": "integer", "default": 100, "title": "Limit" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/alerts/{alert_id}": {
      "delete": {
        "summary": "Delete Alert",
        "description": "Delete a specific alert.",
        "operationId": "delete_alert_api_alerts__alert_id__delete",
        "parameters": [
          {
            "name": "alert_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Alert Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/alerts/{alert_id}/enable": {
      "put": {
        "summary": "Enable Alert",
        "description": "Enable a specific alert.",
        "operationId": "enable_alert_api_alerts__alert_id__enable_put",
        "parameters": [
          {
            "name": "alert_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Alert Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/alerts/{alert_id}/disable": {
      "put": {
        "summary": "Disable Alert",
        "description": "Disable a specific alert.",
        "operationId": "disable_alert_api_alerts__alert_id__disable_put",
        "parameters": [
          {
            "name": "alert_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Alert Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/integration/integration/health": {
      "get": {
        "tags": ["integration", "integration"],
        "summary": "Get System Health",
        "description": "Get integrated system health status.\n\nReturns:\n    System health including component status and integration score",
        "operationId": "get_system_health_integration_integration_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/integration/integration/decision": {
      "post": {
        "tags": ["integration", "integration"],
        "summary": "Make Decision",
        "description": "Make an integrated trading decision using all systems.\n\nArgs:\n    request: Decision request with ticker, market data, and signal data\n\nReturns:\n    Complete integrated decision with brain intelligence and learning context",
        "operationId": "make_decision_integration_integration_decision_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__api__routes_integration__DecisionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IntegratedDecisionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/integration/integration/enhance": {
      "post": {
        "tags": ["integration", "integration"],
        "summary": "Enhance Data",
        "description": "Enhance data with brain intelligence.\n\nArgs:\n    request: Data enhancement request with raw data and source type\n\nReturns:\n    Brain-enhanced data with intelligent insights",
        "operationId": "enhance_data_integration_integration_enhance_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/EnhanceDataRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/integration/integration/context/market": {
      "get": {
        "tags": ["integration", "integration"],
        "summary": "Get Market Context",
        "description": "Get current market context from brain intelligence.\n\nReturns:\n    Current market regime, confidence, and insights",
        "operationId": "get_market_context_integration_integration_context_market_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/integration/integration/rules/active": {
      "get": {
        "tags": ["integration", "integration"],
        "summary": "Get Active Rules",
        "description": "Get currently active trading rules and parameters.\n\nReturns:\n    Active rules version and parameters from learning system",
        "operationId": "get_active_rules_integration_integration_rules_active_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/integration/integration/calibration/apply": {
      "post": {
        "tags": ["integration", "integration"],
        "summary": "Apply Calibration",
        "description": "Apply learned probability calibration to raw probabilities.\n\nArgs:\n    probabilities: List of raw probabilities to calibrate\n\nReturns:\n    Calibrated probabilities",
        "operationId": "apply_calibration_integration_integration_calibration_apply_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": { "type": "number" },
                "type": "array",
                "title": "Probabilities"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/integration/integration/outcome/update": {
      "post": {
        "tags": ["integration", "integration"],
        "summary": "Update Outcome",
        "description": "Update decision outcome for learning system.\n\nArgs:\n    request: Outcome update with exit details and P&L\n\nReturns:\n    Confirmation of outcome update",
        "operationId": "update_outcome_integration_integration_outcome_update_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateOutcomeRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/integration/integration/status": {
      "get": {
        "tags": ["integration", "integration"],
        "summary": "Get Integration Status",
        "description": "Get integration system status and capabilities.\n\nReturns:\n    System status, available components, and capabilities",
        "operationId": "get_integration_status_integration_integration_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/integration/integration/test/decision": {
      "post": {
        "tags": ["integration", "integration"],
        "summary": "Test Decision",
        "description": "Test integrated decision making with sample data.\n\nReturns:\n    Sample decision to verify integration is working",
        "operationId": "test_decision_integration_integration_test_decision_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          }
        }
      }
    },
    "/feedback/feedback/decision": {
      "post": {
        "tags": ["feedback", "feedback"],
        "summary": "Submit Decision Feedback",
        "description": "Submit feedback on a trading decision.\n\nArgs:\n    feedback: Feedback data including event_id, rating, tags, and note\n\nReturns:\n    Feedback submission response",
        "operationId": "submit_decision_feedback_feedback_feedback_decision_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/FeedbackRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/FeedbackResponse" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/feedback/feedback/event/{event_id}": {
      "get": {
        "tags": ["feedback", "feedback"],
        "summary": "Get Event Feedback",
        "description": "Get feedback summary for a specific event.\n\nArgs:\n    event_id: Event ID to get feedback for\n\nReturns:\n    Feedback summary including counts and recent feedback",
        "operationId": "get_event_feedback_feedback_feedback_event__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "title": "Event Id" }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/FeedbackSummary" }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/feedback/feedback/stats": {
      "get": {
        "tags": ["feedback", "feedback"],
        "summary": "Get Feedback Stats",
        "description": "Get overall feedback statistics.\n\nReturns:\n    Dictionary with feedback statistics",
        "operationId": "get_feedback_stats_feedback_feedback_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Feedback Stats Feedback Feedback Stats Get"
                }
              }
            }
          }
        }
      }
    },
    "/feedback/feedback/bulk": {
      "post": {
        "tags": ["feedback", "feedback"],
        "summary": "Submit Bulk Feedback",
        "description": "Submit feedback for multiple decisions at once.\n\nArgs:\n    request: Bulk feedback request with multiple feedback items\n\nReturns:\n    Bulk submission results",
        "operationId": "submit_bulk_feedback_feedback_feedback_bulk_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/BulkFeedbackRequest" }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkFeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/feedback/feedback/health": {
      "get": {
        "tags": ["feedback", "feedback"],
        "summary": "Feedback Health Check",
        "description": "Check feedback system health.\n\nReturns:\n    Health status information",
        "operationId": "feedback_health_check_feedback_feedback_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Feedback Health Check Feedback Feedback Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/metrics": {
      "get": {
        "tags": ["performance", "performance"],
        "summary": "Get Performance Metrics",
        "description": "Get recent performance metrics from async feature computer.\n\nArgs:\n    last_n: Number of recent metrics to return (1-1000)\n\nReturns:\n    Performance metrics including latencies and success rates",
        "operationId": "get_performance_metrics_api_performance_api_performance_metrics_get",
        "parameters": [
          {
            "name": "last_n",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Last N"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Performance Metrics Api Performance Api Performance Metrics Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/metrics/summary": {
      "get": {
        "tags": ["performance", "performance"],
        "summary": "Get Metrics Summary",
        "description": "Get summary statistics for async feature execution.\n\nReturns:\n    Aggregated performance statistics",
        "operationId": "get_metrics_summary_api_performance_api_performance_metrics_summary_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Metrics Summary Api Performance Api Performance Metrics Summary Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/metrics/clear": {
      "post": {
        "tags": ["performance", "performance"],
        "summary": "Clear Metrics",
        "description": "Clear collected performance metrics.\n\nReturns:\n    Confirmation of metrics cleared",
        "operationId": "clear_metrics_api_performance_api_performance_metrics_clear_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Clear Metrics Api Performance Api Performance Metrics Clear Post"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/benchmarks": {
      "get": {
        "tags": ["performance", "performance"],
        "summary": "Get Benchmark Results",
        "description": "Get all benchmark results.\n\nReturns:\n    List of all benchmark runs and their results",
        "operationId": "get_benchmark_results_api_performance_api_performance_benchmarks_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Benchmark Results Api Performance Api Performance Benchmarks Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/benchmarks/feature-computation": {
      "post": {
        "tags": ["performance", "performance"],
        "summary": "Run Feature Benchmark",
        "description": "Run feature computation benchmark.\n\nCompares blocking vs async feature computation performance.\n\nArgs:\n    num_operations: Number of operations to benchmark (10-1000)\n\nReturns:\n    Benchmark comparison results",
        "operationId": "run_feature_benchmark_api_performance_api_performance_benchmarks_feature_computation_post",
        "parameters": [
          {
            "name": "num_operations",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 10,
              "default": 100,
              "title": "Num Operations"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Run Feature Benchmark Api Performance Api Performance Benchmarks Feature Computation Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/benchmarks/signal-generation": {
      "post": {
        "tags": ["performance", "performance"],
        "summary": "Run Signal Benchmark",
        "description": "Run signal generation benchmark.\n\nCompares blocking vs async signal generation performance.\n\nArgs:\n    num_operations: Number of operations to benchmark (10-1000)\n\nReturns:\n    Benchmark comparison results",
        "operationId": "run_signal_benchmark_api_performance_api_performance_benchmarks_signal_generation_post",
        "parameters": [
          {
            "name": "num_operations",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 10,
              "default": 100,
              "title": "Num Operations"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Run Signal Benchmark Api Performance Api Performance Benchmarks Signal Generation Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/benchmarks/clear": {
      "post": {
        "tags": ["performance", "performance"],
        "summary": "Clear Benchmarks",
        "description": "Clear all benchmark results.\n\nReturns:\n    Confirmation of benchmarks cleared",
        "operationId": "clear_benchmarks_api_performance_api_performance_benchmarks_clear_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Clear Benchmarks Api Performance Api Performance Benchmarks Clear Post"
                }
              }
            }
          }
        }
      }
    },
    "/api/performance/api/performance/health": {
      "get": {
        "tags": ["performance", "performance"],
        "summary": "Get Performance Health",
        "description": "Get health status of async feature execution system.\n\nReturns:\n    Health metrics and status",
        "operationId": "get_performance_health_api_performance_api_performance_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Performance Health Api Performance Api Performance Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/web/browse/search": {
      "get": {
        "tags": ["browse-legacy", "browse-legacy"],
        "summary": "Browse Search",
        "description": "Legacy router mounted at /web/browse/search to avoid conflicting with /browse/search.\nPrefer app.api.routes:/browse/search which supports provider overrides.",
        "operationId": "browse_search_web_browse_search_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "minLength": 2, "title": "Q" }
          },
          {
            "name": "max_results",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Max Results"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/web/browse": {
      "get": {
        "tags": ["browse-legacy", "browse-legacy"],
        "summary": "Browse Alias",
        "operationId": "browse_alias_web_browse_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "minLength": 2, "title": "Q" }
          },
          {
            "name": "max_results",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Max Results"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": { "application/json": { "schema": {} } }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/HTTPValidationError" }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health",
        "description": "Basic health check endpoint.",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Health Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/health/detailed": {
      "get": {
        "summary": "Detailed Health",
        "description": "Detailed health check with router information.",
        "operationId": "detailed_health_health_detailed_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Detailed Health Health Detailed Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AgentRequest": {
        "properties": {
          "query": { "type": "string", "title": "Query" },
          "max_steps": {
            "type": "integer",
            "title": "Max Steps",
            "default": 5
          },
          "approvals": {
            "type": "boolean",
            "title": "Approvals",
            "default": false
          }
        },
        "type": "object",
        "required": ["query"],
        "title": "AgentRequest"
      },
      "AgentResponse": {
        "properties": {
          "final": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Final"
          },
          "steps": {
            "items": { "additionalProperties": true, "type": "object" },
            "type": "array",
            "title": "Steps"
          },
          "pending_approval": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Pending Approval"
          }
        },
        "type": "object",
        "title": "AgentResponse"
      },
      "AlertCreateIn": {
        "properties": {
          "symbol": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Symbol",
            "description": "Symbol (e.g. AAPL)"
          },
          "ticker": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Ticker",
            "description": "Alias for symbol"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Alert type (e.g. sma)",
            "default": "sma"
          },
          "window": {
            "anyOf": [{ "type": "integer" }, { "type": "null" }],
            "title": "Window",
            "description": "Lookback window (e.g. 50)"
          },
          "rule": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Rule",
            "description": "Rule (e.g. cross, cross_up, cross_down)",
            "default": "cross"
          },
          "params": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Params"
          }
        },
        "type": "object",
        "title": "AlertCreateIn",
        "description": "Generic alert creation schema."
      },
      "BacktestIn": {
        "properties": {
          "symbol": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Symbol"
          },
          "ticker": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Ticker"
          },
          "strategy": {
            "type": "string",
            "title": "Strategy",
            "description": "Strategy key",
            "default": "sma50_cross"
          },
          "timeframe": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Timeframe",
            "description": "UI timeframe label, e.g. 1M, 6M, 1Y, 5Y, Max"
          },
          "period_days": {
            "anyOf": [
              { "type": "integer", "maximum": 3650.0, "minimum": 5.0 },
              { "type": "null" }
            ],
            "title": "Period Days"
          }
        },
        "type": "object",
        "title": "BacktestIn"
      },
      "Body_api_ingest_pdf_api_ingest_pdf_post": {
        "properties": {
          "file": { "type": "string", "format": "binary", "title": "File" },
          "source_url": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Source Url"
          }
        },
        "type": "object",
        "required": ["file"],
        "title": "Body_api_ingest_pdf_api_ingest_pdf_post"
      },
      "BracketRequest": {
        "properties": {
          "symbol": {
            "type": "string",
            "title": "Symbol",
            "description": "Trading symbol"
          },
          "side": {
            "type": "string",
            "title": "Side",
            "description": "buy or sell"
          },
          "qty": {
            "type": "number",
            "title": "Qty",
            "description": "Quantity to trade"
          },
          "entry": {
            "additionalProperties": true,
            "type": "object",
            "title": "Entry",
            "description": "Entry order parameters"
          },
          "stop": {
            "additionalProperties": true,
            "type": "object",
            "title": "Stop",
            "description": "Stop loss parameters"
          },
          "take": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Take",
            "description": "Take profit parameters"
          },
          "tif": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Tif",
            "description": "Time in force",
            "default": "day"
          }
        },
        "type": "object",
        "required": ["symbol", "side", "qty", "entry", "stop"],
        "title": "BracketRequest"
      },
      "BulkFeedbackRequest": {
        "properties": {
          "feedback_items": {
            "items": { "$ref": "#/components/schemas/FeedbackRequest" },
            "type": "array",
            "title": "Feedback Items",
            "description": "List of feedback items"
          }
        },
        "type": "object",
        "required": ["feedback_items"],
        "title": "BulkFeedbackRequest",
        "description": "Request model for bulk feedback submission.",
        "example": {
          "feedback_items": [
            {
              "event_id": "event1",
              "note": "Great call",
              "rating": "GOOD",
              "tags": ["accurate"]
            },
            {
              "event_id": "event2",
              "note": "Missed the mark",
              "rating": "BAD",
              "tags": ["poor_timing"]
            }
          ]
        }
      },
      "BulkFeedbackResponse": {
        "properties": {
          "total_submitted": { "type": "integer", "title": "Total Submitted" },
          "successful": { "type": "integer", "title": "Successful" },
          "failed": { "type": "integer", "title": "Failed" },
          "feedback_ids": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Feedback Ids"
          },
          "errors": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Errors"
          }
        },
        "type": "object",
        "required": [
          "total_submitted",
          "successful",
          "failed",
          "feedback_ids",
          "errors"
        ],
        "title": "BulkFeedbackResponse",
        "description": "Response model for bulk feedback submission."
      },
      "CalibrationInfo": {
        "properties": {
          "bins": {
            "items": { "items": { "type": "number" }, "type": "array" },
            "type": "array",
            "title": "Bins",
            "description": "Calibration bins"
          },
          "ece": {
            "type": "number",
            "title": "Ece",
            "description": "Expected Calibration Error"
          }
        },
        "type": "object",
        "required": ["bins", "ece"],
        "title": "CalibrationInfo",
        "description": "Calibration curve information."
      },
      "CancelReq": {
        "properties": { "job_id": { "type": "string", "title": "Job Id" } },
        "type": "object",
        "required": ["job_id"],
        "title": "CancelReq"
      },
      "ChatMessage": {
        "properties": {
          "role": {
            "type": "string",
            "enum": ["system", "user", "assistant"],
            "title": "Role"
          },
          "content": { "type": "string", "title": "Content" }
        },
        "type": "object",
        "required": ["role", "content"],
        "title": "ChatMessage"
      },
      "ChatRequest": {
        "properties": {
          "messages": {
            "items": { "$ref": "#/components/schemas/ChatMessage" },
            "type": "array",
            "title": "Messages",
            "description": "OpenAI-style messages"
          },
          "model": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Model",
            "description": "Override model name"
          },
          "temperature": {
            "anyOf": [
              { "type": "number", "maximum": 2.0, "minimum": 0.0 },
              { "type": "null" }
            ],
            "title": "Temperature"
          },
          "max_tokens": {
            "anyOf": [
              { "type": "integer", "maximum": 8192.0, "minimum": 1.0 },
              { "type": "null" }
            ],
            "title": "Max Tokens"
          },
          "stream": { "type": "boolean", "title": "Stream", "default": false },
          "extra": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Extra",
            "description": "Additional fields to pass through to the provider"
          }
        },
        "type": "object",
        "required": ["messages"],
        "title": "ChatRequest"
      },
      "Citation": {
        "properties": {
          "url": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Url"
          },
          "title": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Title"
          },
          "score": { "type": "number", "title": "Score", "default": 0.0 },
          "snippet": { "type": "string", "title": "Snippet", "default": "" }
        },
        "type": "object",
        "title": "Citation"
      },
      "DecisionResponse": {
        "properties": {
          "ticker": { "type": "string", "title": "Ticker" },
          "proposed_action": { "type": "string", "title": "Proposed Action" },
          "original_confidence": {
            "type": "number",
            "title": "Original Confidence"
          },
          "adjusted_confidence": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Adjusted Confidence"
          },
          "meta_learning": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Meta Learning"
          },
          "episodic_memory": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Episodic Memory"
          },
          "cognitive_insights": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Cognitive Insights"
          },
          "timestamp": { "type": "string", "title": "Timestamp" }
        },
        "type": "object",
        "required": [
          "ticker",
          "proposed_action",
          "original_confidence",
          "timestamp"
        ],
        "title": "DecisionResponse",
        "description": "Enhanced decision with cognitive insights."
      },
      "EnhanceDataRequest": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Data",
            "description": "Raw data to enhance"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Data source type"
          },
          "symbols": {
            "anyOf": [
              { "items": { "type": "string" }, "type": "array" },
              { "type": "null" }
            ],
            "title": "Symbols",
            "description": "Optional symbol list"
          }
        },
        "type": "object",
        "required": ["data", "source"],
        "title": "EnhanceDataRequest",
        "description": "Request model for data enhancement."
      },
      "ExplainBullet": {
        "properties": {
          "label": { "type": "string", "title": "Label" },
          "impact": {
            "type": "string",
            "title": "Impact",
            "description": "positive | negative | neutral | bullish | bearish",
            "default": "neutral"
          },
          "weight": {
            "anyOf": [
              { "type": "number", "maximum": 1.0, "minimum": 0.0 },
              { "type": "null" }
            ],
            "title": "Weight"
          },
          "detail": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Detail"
          }
        },
        "type": "object",
        "required": ["label"],
        "title": "ExplainBullet"
      },
      "ExplainFeedbackRequest": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Explanation event ID"
          },
          "rating": {
            "type": "string",
            "title": "Rating",
            "description": "thumbs_up or thumbs_down"
          },
          "notes": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Notes",
            "description": "Optional feedback notes"
          }
        },
        "type": "object",
        "required": ["event_id", "rating"],
        "title": "ExplainFeedbackRequest",
        "description": "Feedback request for explanations."
      },
      "ExplainIn": {
        "properties": {
          "ticker": {
            "type": "string",
            "title": "Ticker",
            "description": "Ticker symbol"
          },
          "signal": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Signal",
            "description": "BUY | SELL | NEUTRAL"
          },
          "confidence": {
            "anyOf": [
              { "type": "number", "maximum": 1.0, "minimum": 0.0 },
              { "type": "null" }
            ],
            "title": "Confidence"
          },
          "reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Reason",
            "description": "Short free-text reason if available"
          },
          "indicators": {
            "additionalProperties": true,
            "type": "object",
            "title": "Indicators"
          },
          "price": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Price"
          },
          "change": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Change",
            "description": "Session % change as raw percent (e.g., 1.23 for +1.23%)"
          }
        },
        "type": "object",
        "required": ["ticker"],
        "title": "ExplainIn"
      },
      "ExplainOut": {
        "properties": {
          "ticker": { "type": "string", "title": "Ticker" },
          "signal": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Signal"
          },
          "confidence": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Confidence"
          },
          "rationale": {
            "type": "string",
            "title": "Rationale",
            "default": ""
          },
          "bullets": {
            "items": { "$ref": "#/components/schemas/ExplainBullet" },
            "type": "array",
            "title": "Bullets"
          },
          "indicators": {
            "additionalProperties": true,
            "type": "object",
            "title": "Indicators"
          },
          "price": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Price"
          },
          "change": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Change"
          },
          "risk": {
            "anyOf": [
              { "$ref": "#/components/schemas/ExplainRisk" },
              { "type": "null" }
            ]
          },
          "meta": {
            "additionalProperties": true,
            "type": "object",
            "title": "Meta"
          }
        },
        "type": "object",
        "required": ["ticker"],
        "title": "ExplainOut"
      },
      "ExplainResponse": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Memory event ID"
          },
          "ticker": {
            "type": "string",
            "title": "Ticker",
            "description": "Stock symbol"
          },
          "regime": {
            "type": "string",
            "title": "Regime",
            "description": "Market regime"
          },
          "p_up_model": {
            "type": "number",
            "title": "P Up Model",
            "description": "Model prediction"
          },
          "p_up_prior": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "P Up Prior",
            "description": "RAG prior"
          },
          "p_up_blend": {
            "type": "number",
            "title": "P Up Blend",
            "description": "Blended prediction"
          },
          "calibration": {
            "$ref": "#/components/schemas/CalibrationInfo",
            "description": "Calibration information"
          },
          "top_features": {
            "items": { "items": {}, "type": "array" },
            "type": "array",
            "title": "Top Features",
            "description": "Top contributing features"
          },
          "waterfall": {
            "items": { "additionalProperties": true, "type": "object" },
            "type": "array",
            "title": "Waterfall",
            "description": "Waterfall breakdown"
          },
          "neighbors": {
            "items": { "$ref": "#/components/schemas/NeighborInfo" },
            "type": "array",
            "title": "Neighbors",
            "description": "Similar historical cases"
          },
          "staleness": {
            "$ref": "#/components/schemas/StalenessInfo",
            "description": "Data freshness"
          },
          "mind_flip": {
            "$ref": "#/components/schemas/MindFlipInfo",
            "description": "Changes since last signal"
          },
          "latency_ms": {
            "type": "number",
            "title": "Latency Ms",
            "description": "Request latency"
          },
          "trace_available": {
            "type": "boolean",
            "title": "Trace Available",
            "description": "Whether trace data is available"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "ticker",
          "regime",
          "p_up_model",
          "p_up_blend",
          "calibration",
          "top_features",
          "waterfall",
          "neighbors",
          "staleness",
          "mind_flip",
          "latency_ms",
          "trace_available"
        ],
        "title": "ExplainResponse",
        "description": "Response model for signal explanation."
      },
      "ExplainRisk": {
        "properties": {
          "stopLossPct": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Stoplosspct"
          },
          "takeProfitPct": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Takeprofitpct"
          },
          "rrr": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Rrr"
          },
          "note": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Note"
          }
        },
        "type": "object",
        "title": "ExplainRisk"
      },
      "FeedbackRequest": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "ID of the event to provide feedback on"
          },
          "rating": {
            "type": "string",
            "title": "Rating",
            "description": "Feedback rating: GOOD or BAD"
          },
          "tags": {
            "anyOf": [
              { "items": { "type": "string" }, "type": "array" },
              { "type": "null" }
            ],
            "title": "Tags",
            "description": "Optional feedback tags"
          },
          "note": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Note",
            "description": "Optional feedback note"
          }
        },
        "type": "object",
        "required": ["event_id", "rating"],
        "title": "FeedbackRequest",
        "description": "Request model for decision feedback.",
        "example": {
          "event_id": "12345678-1234-1234-1234-123456789012",
          "note": "Model correctly predicted the earnings reaction",
          "rating": "GOOD",
          "tags": ["accurate_prediction", "good_timing"]
        }
      },
      "FeedbackResponse": {
        "properties": {
          "success": { "type": "boolean", "title": "Success" },
          "feedback_id": { "type": "string", "title": "Feedback Id" },
          "message": { "type": "string", "title": "Message" }
        },
        "type": "object",
        "required": ["success", "feedback_id", "message"],
        "title": "FeedbackResponse",
        "description": "Response model for feedback submission."
      },
      "FeedbackSummary": {
        "properties": {
          "event_id": { "type": "string", "title": "Event Id" },
          "total_feedback_count": {
            "type": "integer",
            "title": "Total Feedback Count"
          },
          "rating_counts": {
            "additionalProperties": { "type": "integer" },
            "type": "object",
            "title": "Rating Counts"
          },
          "recent_feedback": {
            "items": { "additionalProperties": true, "type": "object" },
            "type": "array",
            "title": "Recent Feedback"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "total_feedback_count",
          "rating_counts",
          "recent_feedback"
        ],
        "title": "FeedbackSummary",
        "description": "Summary of feedback for an event."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": { "$ref": "#/components/schemas/ValidationError" },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthResponse": {
        "properties": {
          "exposure_gross": { "type": "number", "title": "Exposure Gross" },
          "exposure_net": { "type": "number", "title": "Exposure Net" },
          "open_orders": { "type": "integer", "title": "Open Orders" },
          "risk_today": { "type": "number", "title": "Risk Today" },
          "dd_day": { "type": "number", "title": "Dd Day" },
          "dd_week": { "type": "number", "title": "Dd Week" },
          "guardrail_blocks_24h": {
            "type": "integer",
            "title": "Guardrail Blocks 24H"
          },
          "portfolio_value": { "type": "number", "title": "Portfolio Value" },
          "cash_balance": { "type": "number", "title": "Cash Balance" },
          "trading_enabled": { "type": "boolean", "title": "Trading Enabled" },
          "emergency_stop": { "type": "boolean", "title": "Emergency Stop" }
        },
        "type": "object",
        "required": [
          "exposure_gross",
          "exposure_net",
          "open_orders",
          "risk_today",
          "dd_day",
          "dd_week",
          "guardrail_blocks_24h",
          "portfolio_value",
          "cash_balance",
          "trading_enabled",
          "emergency_stop"
        ],
        "title": "HealthResponse"
      },
      "IntegratedDecisionResponse": {
        "properties": {
          "timestamp": { "type": "number", "title": "Timestamp" },
          "ticker": { "type": "string", "title": "Ticker" },
          "decision_type": { "type": "string", "title": "Decision Type" },
          "market_regime": { "type": "string", "title": "Market Regime" },
          "regime_confidence": {
            "type": "number",
            "title": "Regime Confidence"
          },
          "brain_features": {
            "additionalProperties": { "type": "number" },
            "type": "object",
            "title": "Brain Features"
          },
          "brain_insights": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Brain Insights"
          },
          "active_rules_version": {
            "type": "string",
            "title": "Active Rules Version"
          },
          "parameters_used": {
            "additionalProperties": true,
            "type": "object",
            "title": "Parameters Used"
          },
          "predicted_probability": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Predicted Probability"
          },
          "calibrated_probability": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Calibrated Probability"
          },
          "action": { "type": "string", "title": "Action" },
          "quantity": { "type": "number", "title": "Quantity" },
          "confidence": { "type": "number", "title": "Confidence" },
          "reasoning": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Reasoning"
          },
          "stop_loss": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Stop Loss"
          },
          "take_profit": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Take Profit"
          },
          "risk_score": { "type": "number", "title": "Risk Score" }
        },
        "type": "object",
        "required": [
          "timestamp",
          "ticker",
          "decision_type",
          "market_regime",
          "regime_confidence",
          "brain_features",
          "brain_insights",
          "active_rules_version",
          "parameters_used",
          "predicted_probability",
          "calibrated_probability",
          "action",
          "quantity",
          "confidence",
          "reasoning",
          "stop_loss",
          "take_profit",
          "risk_score"
        ],
        "title": "IntegratedDecisionResponse",
        "description": "Response model for integrated decisions."
      },
      "MindFlipInfo": {
        "properties": {
          "since_event": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Since Event",
            "description": "Previous event ID"
          },
          "flipped": {
            "type": "boolean",
            "title": "Flipped",
            "description": "Whether mind flipped"
          },
          "diff": {
            "items": { "items": {}, "type": "array" },
            "type": "array",
            "title": "Diff",
            "description": "Feature differences"
          }
        },
        "type": "object",
        "required": ["flipped"],
        "title": "MindFlipInfo",
        "description": "Information about feature changes since last signal."
      },
      "NeighborInfo": {
        "properties": {
          "id": { "type": "string", "title": "Id", "description": "Event ID" },
          "p_outcome": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "P Outcome",
            "description": "Historical outcome probability"
          },
          "similarity": {
            "type": "number",
            "title": "Similarity",
            "description": "Similarity score"
          },
          "context": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Context",
            "description": "Neighbor context"
          }
        },
        "type": "object",
        "required": ["id", "similarity"],
        "title": "NeighborInfo",
        "description": "Neighbor case information."
      },
      "NotifyIn": {
        "properties": { "text": { "type": "string", "title": "Text" } },
        "type": "object",
        "required": ["text"],
        "title": "NotifyIn"
      },
      "OutcomeRecord": {
        "properties": {
          "ticker": { "type": "string", "title": "Ticker" },
          "action": { "type": "string", "title": "Action" },
          "entry_price": { "type": "number", "title": "Entry Price" },
          "quantity": { "type": "number", "title": "Quantity" },
          "market_context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Market Context"
          },
          "confidence": { "type": "number", "title": "Confidence" },
          "reasoning": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Reasoning"
          },
          "outcome_pnl": { "type": "number", "title": "Outcome Pnl" },
          "outcome_pnl_percent": {
            "type": "number",
            "title": "Outcome Pnl Percent"
          },
          "holding_period_hours": {
            "type": "number",
            "title": "Holding Period Hours"
          },
          "current_prices": {
            "additionalProperties": { "type": "number" },
            "type": "object",
            "title": "Current Prices"
          }
        },
        "type": "object",
        "required": [
          "ticker",
          "action",
          "entry_price",
          "quantity",
          "market_context",
          "confidence",
          "reasoning",
          "outcome_pnl",
          "outcome_pnl_percent",
          "holding_period_hours",
          "current_prices"
        ],
        "title": "OutcomeRecord",
        "description": "Record of decision outcome."
      },
      "PanicResponse": {
        "properties": {
          "status": { "type": "string", "title": "Status" },
          "flattened_in_s": { "type": "number", "title": "Flattened In S" },
          "positions_closed": {
            "type": "integer",
            "title": "Positions Closed"
          },
          "orders_canceled": { "type": "integer", "title": "Orders Canceled" },
          "total_positions": { "type": "integer", "title": "Total Positions" },
          "total_orders": { "type": "integer", "title": "Total Orders" },
          "success": { "type": "boolean", "title": "Success" }
        },
        "type": "object",
        "required": [
          "status",
          "flattened_in_s",
          "positions_closed",
          "orders_canceled",
          "total_positions",
          "total_orders",
          "success"
        ],
        "title": "PanicResponse"
      },
      "PaperRunRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Description"
          },
          "initial_balance": {
            "type": "number",
            "exclusiveMinimum": 0.0,
            "title": "Initial Balance",
            "default": 100000.0
          },
          "max_trades_per_minute": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Max Trades Per Minute",
            "default": 100
          },
          "config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Config"
          }
        },
        "type": "object",
        "required": ["name"],
        "title": "PaperRunRequest"
      },
      "PaperRunResponse": {
        "properties": {
          "id": { "type": "integer", "title": "Id" },
          "name": { "type": "string", "title": "Name" },
          "status": { "type": "string", "title": "Status" },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "total_trades": { "type": "integer", "title": "Total Trades" },
          "total_pnl": { "type": "number", "title": "Total Pnl" },
          "current_balance": { "type": "number", "title": "Current Balance" },
          "win_rate": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Win Rate"
          },
          "avg_fill_latency_ms": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Avg Fill Latency Ms"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "status",
          "started_at",
          "total_trades",
          "total_pnl",
          "current_balance",
          "win_rate",
          "avg_fill_latency_ms"
        ],
        "title": "PaperRunResponse"
      },
      "QualityResponse": {
        "properties": {
          "bucket_stats": {
            "items": { "additionalProperties": true, "type": "object" },
            "type": "array",
            "title": "Bucket Stats"
          },
          "venue_performance": {
            "additionalProperties": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "object",
            "title": "Venue Performance"
          },
          "generated_at": { "type": "string", "title": "Generated At" }
        },
        "type": "object",
        "required": ["bucket_stats", "venue_performance", "generated_at"],
        "title": "QualityResponse"
      },
      "QueryRequest": {
        "properties": {
          "query": { "type": "string", "title": "Query" },
          "top_k": { "type": "integer", "title": "Top K", "default": 5 }
        },
        "type": "object",
        "required": ["query"],
        "title": "QueryRequest"
      },
      "QueryResponse": {
        "properties": {
          "answer": { "type": "string", "title": "Answer" },
          "citations": {
            "items": { "$ref": "#/components/schemas/Citation" },
            "type": "array",
            "title": "Citations"
          },
          "contexts": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Contexts"
          }
        },
        "type": "object",
        "required": ["answer"],
        "title": "QueryResponse"
      },
      "ScreenerItem": {
        "properties": {
          "ticker": {
            "type": "string",
            "title": "Ticker",
            "description": "Ticker symbol"
          },
          "price": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Price",
            "description": "Last close price"
          },
          "sma20": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Sma20"
          },
          "sma50": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Sma50"
          },
          "rsi14": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Rsi14"
          },
          "signal": {
            "type": "string",
            "title": "Signal",
            "description": "BUY | SELL | NEUTRAL"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence"
          },
          "reason": { "type": "string", "title": "Reason", "default": "" }
        },
        "type": "object",
        "required": ["ticker", "signal", "confidence"],
        "title": "ScreenerItem"
      },
      "ScreenerRequest": {
        "properties": {
          "universe": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Universe",
            "description": "List of symbols to screen"
          },
          "min_confidence": {
            "type": "number",
            "title": "Min Confidence",
            "description": "Minimum signal confidence",
            "default": 0.6
          },
          "min_probability": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Min Probability",
            "description": "Minimum probability threshold"
          },
          "max_probability": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Max Probability",
            "description": "Maximum probability threshold"
          },
          "regimes": {
            "anyOf": [
              { "items": { "type": "string" }, "type": "array" },
              { "type": "null" }
            ],
            "title": "Regimes",
            "description": "Filter by specific regimes"
          },
          "sort_by": {
            "type": "string",
            "title": "Sort By",
            "description": "Sort by: confidence, probability, regime",
            "default": "confidence"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Maximum results to return",
            "default": 50
          }
        },
        "type": "object",
        "required": ["universe"],
        "title": "ScreenerRequest",
        "description": "Request for market screening."
      },
      "ScreenerResult": {
        "properties": {
          "symbol": { "type": "string", "title": "Symbol" },
          "p_up": { "type": "number", "title": "P Up" },
          "confidence": { "type": "number", "title": "Confidence" },
          "regime": { "type": "string", "title": "Regime" },
          "top_features": {
            "items": { "items": {}, "type": "array" },
            "type": "array",
            "title": "Top Features"
          },
          "score": { "type": "number", "title": "Score" },
          "position_size": {
            "anyOf": [
              { "additionalProperties": true, "type": "object" },
              { "type": "null" }
            ],
            "title": "Position Size"
          }
        },
        "type": "object",
        "required": [
          "symbol",
          "p_up",
          "confidence",
          "regime",
          "top_features",
          "score"
        ],
        "title": "ScreenerResult",
        "description": "Screener result for a single symbol."
      },
      "StalenessInfo": {
        "properties": {
          "age_ms": {
            "type": "integer",
            "title": "Age Ms",
            "description": "Age in milliseconds"
          },
          "ttl_s": {
            "type": "integer",
            "title": "Ttl S",
            "description": "TTL in seconds"
          },
          "is_stale": {
            "type": "boolean",
            "title": "Is Stale",
            "description": "Whether data is stale"
          }
        },
        "type": "object",
        "required": ["age_ms", "ttl_s", "is_stale"],
        "title": "StalenessInfo",
        "description": "Staleness information for data freshness."
      },
      "StrictGatesModel": {
        "properties": {
          "min_trades": {
            "type": "integer",
            "title": "Min Trades",
            "default": 200
          },
          "min_sharpe_improvement_abs": {
            "type": "number",
            "title": "Min Sharpe Improvement Abs",
            "default": 0.2
          },
          "min_sharpe_improvement_rel": {
            "type": "number",
            "title": "Min Sharpe Improvement Rel",
            "default": 0.15
          },
          "max_brier_score_improvement": {
            "type": "number",
            "title": "Max Brier Score Improvement",
            "default": 0.02
          },
          "calibration_slope_range": {
            "prefixItems": [{ "type": "number" }, { "type": "number" }],
            "type": "array",
            "maxItems": 2,
            "minItems": 2,
            "title": "Calibration Slope Range",
            "default": [0.8, 1.2]
          },
          "max_drawdown_deterioration_rel": {
            "type": "number",
            "title": "Max Drawdown Deterioration Rel",
            "default": 0.1
          },
          "hit_rate_significance_p": {
            "type": "number",
            "title": "Hit Rate Significance P",
            "default": 0.05
          },
          "max_psi_threshold": {
            "type": "number",
            "title": "Max Psi Threshold",
            "default": 0.25
          },
          "max_daily_turnover_cap": {
            "type": "number",
            "title": "Max Daily Turnover Cap",
            "default": 50.0
          }
        },
        "type": "object",
        "title": "StrictGatesModel"
      },
      "TheoryPerfResponse": {
        "properties": {
          "theory_name": { "type": "string", "title": "Theory Name" },
          "status": { "type": "string", "title": "Status" },
          "current_allocation": {
            "type": "number",
            "title": "Current Allocation"
          },
          "total_trades_executed": {
            "type": "integer",
            "title": "Total Trades Executed"
          },
          "total_pnl": { "type": "number", "title": "Total Pnl" },
          "win_rate": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Win Rate"
          },
          "sharpe_ratio": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Sharpe Ratio"
          },
          "avg_fill_latency_ms": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Avg Fill Latency Ms"
          }
        },
        "type": "object",
        "required": [
          "theory_name",
          "status",
          "current_allocation",
          "total_trades_executed",
          "total_pnl",
          "win_rate",
          "sharpe_ratio",
          "avg_fill_latency_ms"
        ],
        "title": "TheoryPerfResponse"
      },
      "TraceEdge": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source node ID"
          },
          "target": {
            "type": "string",
            "title": "Target",
            "description": "Target node ID"
          },
          "label": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Label",
            "description": "Edge label"
          }
        },
        "type": "object",
        "required": ["source", "target"],
        "title": "TraceEdge",
        "description": "Edge in the decision DAG."
      },
      "TraceGraph": {
        "properties": {
          "nodes": {
            "items": { "$ref": "#/components/schemas/TraceNode" },
            "type": "array",
            "title": "Nodes",
            "description": "Graph nodes"
          },
          "edges": {
            "items": { "$ref": "#/components/schemas/TraceEdge" },
            "type": "array",
            "title": "Edges",
            "description": "Graph edges"
          }
        },
        "type": "object",
        "required": ["nodes", "edges"],
        "title": "TraceGraph",
        "description": "Decision DAG structure."
      },
      "TraceNode": {
        "properties": {
          "id": { "type": "string", "title": "Id", "description": "Node ID" },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Node type"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Display name"
          },
          "latency_ms": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Latency Ms",
            "description": "Processing latency"
          }
        },
        "type": "object",
        "required": ["id", "type", "name"],
        "title": "TraceNode",
        "description": "Node in the decision DAG."
      },
      "TraceResponse": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Memory event ID"
          },
          "trace_id": {
            "type": "string",
            "title": "Trace Id",
            "description": "Unique trace ID"
          },
          "ticker": {
            "type": "string",
            "title": "Ticker",
            "description": "Stock symbol"
          },
          "graph": {
            "$ref": "#/components/schemas/TraceGraph",
            "description": "Decision DAG"
          },
          "raw": {
            "additionalProperties": true,
            "type": "object",
            "title": "Raw",
            "description": "Raw trace data"
          },
          "total_latency_ms": {
            "type": "number",
            "title": "Total Latency Ms",
            "description": "Total processing time"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Trace timestamp"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "description": "Whether trace was cached"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "trace_id",
          "ticker",
          "graph",
          "raw",
          "total_latency_ms",
          "timestamp",
          "cached"
        ],
        "title": "TraceResponse",
        "description": "Response model for trace data."
      },
      "TradeIn": {
        "properties": {
          "symbol": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Symbol"
          },
          "ticker": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Ticker"
          },
          "side": {
            "type": "string",
            "title": "Side",
            "description": "BUY | SELL"
          },
          "qty": {
            "anyOf": [
              { "type": "integer", "minimum": 0.0 },
              { "type": "null" }
            ],
            "title": "Qty"
          },
          "entry": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Entry"
          },
          "stop": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Stop"
          },
          "target": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Target"
          },
          "sizing": {
            "anyOf": [
              { "$ref": "#/components/schemas/TradeSizing" },
              { "type": "null" }
            ]
          },
          "meta": {
            "additionalProperties": true,
            "type": "object",
            "title": "Meta"
          },
          "type": { "type": "string", "title": "Type", "default": "MARKET" },
          "mode": { "type": "string", "title": "Mode", "default": "paper" }
        },
        "type": "object",
        "required": ["side"],
        "title": "TradeIn"
      },
      "TradeOut": {
        "properties": {
          "ok": { "type": "boolean", "title": "Ok", "default": true },
          "symbol": { "type": "string", "title": "Symbol" },
          "side": { "type": "string", "title": "Side" },
          "qty": { "type": "integer", "title": "Qty" },
          "entry": { "type": "number", "title": "Entry" },
          "stop": { "type": "number", "title": "Stop" },
          "target": { "type": "number", "title": "Target" },
          "sizing": {
            "additionalProperties": true,
            "type": "object",
            "title": "Sizing"
          },
          "risk": {
            "additionalProperties": true,
            "type": "object",
            "title": "Risk"
          },
          "message": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Message"
          },
          "provider_chain": {
            "items": { "type": "string" },
            "type": "array",
            "title": "Provider Chain"
          },
          "meta": {
            "additionalProperties": true,
            "type": "object",
            "title": "Meta"
          }
        },
        "type": "object",
        "required": ["symbol", "side", "qty", "entry", "stop", "target"],
        "title": "TradeOut"
      },
      "TradeRequest": {
        "properties": {
          "symbol": {
            "type": "string",
            "title": "Symbol",
            "description": "Trading symbol"
          },
          "side": {
            "type": "string",
            "title": "Side",
            "description": "buy or sell"
          },
          "qty": {
            "type": "number",
            "title": "Qty",
            "description": "Quantity to trade"
          },
          "tif": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Tif",
            "description": "Time in force",
            "default": "day"
          },
          "client_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Client Id",
            "description": "Client order ID"
          },
          "p_up": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "P Up",
            "description": "Model confidence",
            "default": 0.5
          },
          "regime": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Regime",
            "description": "Market regime",
            "default": "base"
          },
          "spreads_bps": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Spreads Bps",
            "description": "Current bid-ask spread",
            "default": 10.0
          },
          "news_heat": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "News Heat",
            "description": "News heat score",
            "default": 0.0
          }
        },
        "type": "object",
        "required": ["symbol", "side", "qty"],
        "title": "TradeRequest"
      },
      "TradeSizing": {
        "properties": {
          "method": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Method",
            "description": "atr | fixed | none"
          },
          "atr": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Atr"
          },
          "period": {
            "anyOf": [
              { "type": "integer", "maximum": 1000.0, "minimum": 1.0 },
              { "type": "null" }
            ],
            "title": "Period",
            "default": 14
          },
          "atrMult": {
            "anyOf": [
              { "type": "number", "maximum": 1000.0, "minimum": 0.01 },
              { "type": "null" }
            ],
            "title": "Atrmult",
            "default": 1.5
          },
          "riskAmount": {
            "anyOf": [{ "type": "number", "minimum": 0.0 }, { "type": "null" }],
            "title": "Riskamount"
          },
          "rMultiple": {
            "anyOf": [
              { "type": "number", "maximum": 1000.0, "minimum": 0.1 },
              { "type": "null" }
            ],
            "title": "Rmultiple",
            "default": 2.0
          }
        },
        "type": "object",
        "title": "TradeSizing"
      },
      "UpdateOutcomeRequest": {
        "properties": {
          "decision_timestamp": {
            "type": "number",
            "title": "Decision Timestamp",
            "description": "Original decision timestamp"
          },
          "exit_price": {
            "type": "number",
            "title": "Exit Price",
            "description": "Exit price"
          },
          "realized_pnl": {
            "type": "number",
            "title": "Realized Pnl",
            "description": "Realized profit/loss"
          },
          "fees": {
            "type": "number",
            "title": "Fees",
            "description": "Trading fees paid",
            "default": 0.0
          },
          "exit_reason": {
            "type": "string",
            "title": "Exit Reason",
            "description": "Reason for exit",
            "default": "manual"
          }
        },
        "type": "object",
        "required": ["decision_timestamp", "exit_price", "realized_pnl"],
        "title": "UpdateOutcomeRequest",
        "description": "Request model for updating decision outcomes."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": { "anyOf": [{ "type": "string" }, { "type": "integer" }] },
            "type": "array",
            "title": "Location"
          },
          "msg": { "type": "string", "title": "Message" },
          "type": { "type": "string", "title": "Error Type" }
        },
        "type": "object",
        "required": ["loc", "msg", "type"],
        "title": "ValidationError"
      },
      "WatchReq": {
        "properties": {
          "topic": { "type": "string", "title": "Topic" },
          "cron": { "type": "string", "title": "Cron", "default": "0 9 * * *" },
          "job_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Job Id"
          }
        },
        "type": "object",
        "required": ["topic"],
        "title": "WatchReq"
      },
      "WebIngestRequest": {
        "properties": {
          "query": { "type": "string", "title": "Query" },
          "max_results": {
            "type": "integer",
            "title": "Max Results",
            "default": 5
          }
        },
        "type": "object",
        "required": ["query"],
        "title": "WebIngestRequest"
      },
      "WebIngestResponse": {
        "properties": {
          "chunks_indexed": { "type": "integer", "title": "Chunks Indexed" },
          "sources_indexed": {
            "items": { "additionalProperties": true, "type": "object" },
            "type": "array",
            "title": "Sources Indexed"
          }
        },
        "type": "object",
        "required": ["chunks_indexed"],
        "title": "WebIngestResponse"
      },
      "app__api__routes_cognitive__DecisionRequest": {
        "properties": {
          "ticker": {
            "type": "string",
            "title": "Ticker",
            "description": "Stock symbol"
          },
          "proposed_action": {
            "type": "string",
            "title": "Proposed Action",
            "description": "Proposed action (buy/sell/hold)"
          },
          "market_context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Market Context",
            "description": "Current market context"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Initial confidence"
          }
        },
        "type": "object",
        "required": [
          "ticker",
          "proposed_action",
          "market_context",
          "confidence"
        ],
        "title": "DecisionRequest",
        "description": "Request for cognitive decision enhancement."
      },
      "app__api__routes_integration__DecisionRequest": {
        "properties": {
          "ticker": {
            "type": "string",
            "title": "Ticker",
            "description": "Symbol to analyze"
          },
          "market_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Market Data",
            "description": "Current market data"
          },
          "signal_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Signal Data",
            "description": "Signal generation data"
          },
          "decision_type": {
            "type": "string",
            "title": "Decision Type",
            "description": "Type of decision",
            "default": "signal"
          }
        },
        "type": "object",
        "required": ["ticker", "market_data", "signal_data"],
        "title": "DecisionRequest",
        "description": "Request model for making integrated decisions."
      },
      "app__api__routes_paper__TradeResponse": {
        "properties": {
          "id": { "type": "integer", "title": "Id" },
          "trade_id": { "type": "string", "title": "Trade Id" },
          "ticker": { "type": "string", "title": "Ticker" },
          "direction": { "type": "string", "title": "Direction" },
          "quantity": { "type": "number", "title": "Quantity" },
          "theory_name": { "type": "string", "title": "Theory Name" },
          "status": { "type": "string", "title": "Status" },
          "signal_time": {
            "type": "string",
            "format": "date-time",
            "title": "Signal Time"
          },
          "fill_price": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Fill Price"
          },
          "realized_pnl": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Realized Pnl"
          }
        },
        "type": "object",
        "required": [
          "id",
          "trade_id",
          "ticker",
          "direction",
          "quantity",
          "theory_name",
          "status",
          "signal_time",
          "fill_price",
          "realized_pnl"
        ],
        "title": "TradeResponse"
      },
      "app__api__routes_screener__ScreenerResponse": {
        "properties": {
          "results": {
            "items": { "$ref": "#/components/schemas/ScreenerResult" },
            "type": "array",
            "title": "Results"
          },
          "total_screened": { "type": "integer", "title": "Total Screened" },
          "filters_applied": {
            "additionalProperties": true,
            "type": "object",
            "title": "Filters Applied"
          },
          "execution_time_ms": {
            "type": "number",
            "title": "Execution Time Ms"
          },
          "regime_breakdown": {
            "additionalProperties": { "type": "integer" },
            "type": "object",
            "title": "Regime Breakdown"
          }
        },
        "type": "object",
        "required": [
          "results",
          "total_screened",
          "filters_applied",
          "execution_time_ms",
          "regime_breakdown"
        ],
        "title": "ScreenerResponse",
        "description": "Response from screener."
      },
      "app__api__routes_trading__ScreenerResponse": {
        "properties": {
          "ran_at": { "type": "number", "title": "Ran At" },
          "market": { "type": "string", "title": "Market" },
          "count": { "type": "integer", "title": "Count" },
          "results": {
            "items": { "$ref": "#/components/schemas/ScreenerItem" },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": ["ran_at", "market", "count", "results"],
        "title": "ScreenerResponse"
      },
      "app__trading__router__TradeResponse": {
        "properties": {
          "status": { "type": "string", "title": "Status" },
          "order_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Order Id"
          },
          "policy_reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Policy Reason"
          },
          "guardrail_reason": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Guardrail Reason"
          },
          "estimate_fee": {
            "anyOf": [{ "type": "number" }, { "type": "null" }],
            "title": "Estimate Fee"
          },
          "stamps": {
            "additionalProperties": true,
            "type": "object",
            "title": "Stamps"
          },
          "event_id": {
            "anyOf": [{ "type": "string" }, { "type": "null" }],
            "title": "Event Id"
          }
        },
        "type": "object",
        "required": ["status"],
        "title": "TradeResponse"
      }
    }
  }
}
